/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

plugins {
    id "com.jfrog.bintray" version "1.7"
    id "com.github.dcendents.android-maven" version "1.5"
}

repositories {
    jcenter()
}

apply plugin: 'idea'
apply plugin: 'java'

group 'me.tianshili'
version '1.0'

sourceSets {
    main {
        java {

        }
    }
}

ext {
    bintrayName = 'CoconutAnnotationLib'
    artifact = 'coconut'

    libraryName = 'Coconut Annotation Library'
    libraryDescription = ''
    libraryVersion = "1.0.0"

    bintrayRepo = 'Coconut'
    bintrayOrganization = "coconut"
    publishedGroupId = 'me.tianshili.coconut'

    siteUrl = 'https://github.com/PrivacyStreams/PrivacyStreams'
    gitUrl = 'https://github.com/PrivacyStreams/PrivacyStreams.git'
    githubRepository= 'PrivacyStreams/PrivacyStreams'

    developerId = 'tianshi'
    developerName = 'Li Tianshi'
    developerEmail = 'tianshil@andrew.cmu.edu'

    licenseName = 'The Apache Software License, Version 2.0'
    licenseUrl = 'http://www.apache.org/licenses/LICENSE-2.0.txt'
    allLicenses = ["Apache-2.0"]
}

install {
    repositories.mavenInstaller {
        pom {
            project {
                packaging 'jar'
                groupId publishedGroupId
                artifactId artifact

                // Add your description here
                name libraryName
                description libraryDescription
                url siteUrl

                // Set your license
                licenses {
                    license {
                        name licenseName
                        url licenseUrl
                    }
                }
                developers {
                    developer {
                        id developerId
                        name developerName
                        email developerEmail
                    }
                }
                scm {
                    connection gitUrl
                    developerConnection gitUrl
                    url siteUrl

                }
            }
        }
    }
}

version = libraryVersion

task sourcesJar(type: Jar) {
    classifier = 'sources'
    from sourceSets.main.java.srcDirs
}

artifacts {
    archives sourcesJar
}

bintray {
    user = 'bintray.user'
    key = 'bintray.apiKey'

    configurations = ['archives']
    pkg {
        repo = bintrayRepo
        name = bintrayName
        desc = libraryDescription
        websiteUrl = siteUrl
        issueTrackerUrl = siteUrl + '/issues'
        vcsUrl = gitUrl
        licenses = allLicenses
        githubRepo = githubRepository //Optional Github repository
        githubReleaseNotesFile = 'README.md' //Optional Github readme file
        publish = false
        publicDownloadNumbers = true

        version {
            desc = libraryDescription
            gpg {
                sign = true // Determines whether to GPG sign the files. The default is false
                passphrase = '' // Optional. The passphrase for GPG signing'
            }
        }
    }
}